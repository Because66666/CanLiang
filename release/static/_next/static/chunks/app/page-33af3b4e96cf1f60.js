(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3632:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Y});var a=s(5155),r=s(2115),l=s(2596),i=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,l.$)(t))}let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:n("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});o.displayName="Card",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:n("flex flex-col space-y-1.5 p-6",s),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:n("text-2xl font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:n("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:n("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:n("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";let d=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:n("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});d.displayName="Input";var m=s(9099),u=s(1788),x=s(4416),f=s(7108),h=s(4186),p=s(235),y=s(7924),g=s(9074),j=s(3109),b=s(64);let v=b.bL,N=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(b.B8,{ref:t,className:n("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});N.displayName=b.B8.displayName;let w=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(b.l9,{ref:t,className:n("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});w.displayName=b.l9.displayName;let k=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(b.UC,{ref:t,className:n("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});k.displayName=b.UC.displayName;var C=s(9912),P=s(6474),A=s(7863),T=s(5196);let O=C.bL;C.YJ;let R=C.WT,L=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(C.l9,{ref:t,className:n("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(C.In,{asChild:!0,children:(0,a.jsx)(P.A,{className:"h-4 w-4 opacity-50"})})]})});L.displayName=C.l9.displayName;let S=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.PP,{ref:t,className:n("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})});S.displayName=C.PP.displayName;let M=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.wn,{ref:t,className:n("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})});M.displayName=C.wn.displayName;let E=r.forwardRef((e,t)=>{let{className:s,children:r,position:l="popper",...i}=e;return(0,a.jsx)(C.ZL,{children:(0,a.jsxs)(C.UC,{ref:t,className:n("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...i,children:[(0,a.jsx)(S,{}),(0,a.jsx)(C.LM,{className:n("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(M,{})]})})});E.displayName=C.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.JU,{ref:t,className:n("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=C.JU.displayName;let z=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(C.q7,{ref:t,className:n("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(C.VF,{children:(0,a.jsx)(T.A,{className:"h-4 w-4"})})}),(0,a.jsx)(C.p4,{children:r})]})});z.displayName=C.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.wv,{ref:t,className:n("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=C.wv.displayName;var H=s(5452);let _=H.bL,B=H.l9,U=H.ZL;H.bm;let I=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(H.hJ,{ref:t,className:n("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});I.displayName=H.hJ.displayName;let F=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(U,{children:[(0,a.jsx)(I,{}),(0,a.jsxs)(H.UC,{ref:t,className:n("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[r,(0,a.jsxs)(H.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});F.displayName=H.UC.displayName;let W=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:n("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};W.displayName="DialogHeader";let G=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(H.hE,{ref:t,className:n("text-lg font-semibold leading-none tracking-tight",s),...r})});G.displayName=H.hE.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(H.VY,{ref:t,className:n("text-sm text-muted-foreground",s),...r})}).displayName=H.VY.displayName;var V=s(9708);let J=(0,s(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Z=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:i=!1,...o}=e,c=i?V.DX:"button";return(0,a.jsx)(c,{className:n(J({variant:r,size:l,className:s})),ref:t,...o})});Z.displayName="Button";var D=s(9663);function Y(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(""),[i,n]=(0,r.useState)(null),[j,b]=(0,r.useState)(!0),[C,P]=(0,r.useState)(null),[A,T]=(0,r.useState)(""),[S,M]=(0,r.useState)(!1),[H,U]=(0,r.useState)(0),[I,V]=(0,r.useState)(null),[J,Y]=(0,r.useState)(null),[X,$]=(0,r.useState)(null),[K,ee]=(0,r.useState)(!1),[et,es]=(0,r.useState)(null),[ea,er]=(0,r.useState)(!1),[el,ei]=(0,r.useState)(!1),en={primary:"#3498db",secondary:"#2c3e50",accent1:"#4CAF50",accent2:"#f39c12",light:"#e6f2ff",lightBorder:"#85b8e8",lightGray:"#f5f5f5",mediumGray:"#bdc3c7",darkText:"#003366"},eo={圣遗物:"#34495e",矿物:"#4CAF50",食材:"#f39c12",其他:"#bdc3c7"},ec=["#3498db","#27ae60","#f39c12","#9b59b6","#e74c3c","#1abc9c","#d35400","#2980b9","#8e44ad","#c0392b"],ed=async e=>{let t={totalItems:"总物品数量趋势",duration:"运行时间趋势"};es({type:e,title:t[e],data:null,loading:!0});try{let t=await fetch("totalItems"===e?"/api/total-items-trend":"/api/duration-trend");if(t.ok){let e=await t.json();es(t=>t?{...t,data:e.data,loading:!1}:null)}else{let t=em(e);es(e=>e?{...e,data:t,loading:!1}:null)}}catch(a){console.error("获取".concat(t[e],"数据失败:"),a);let s=em(e);es(e=>e?{...e,data:s,loading:!1}:null)}},em=e=>({0x134ff98:10}),eu=async e=>{Y(e),ee(!0);try{let t=await fetch("/api/item-trend?item=".concat(encodeURIComponent(e)));if(t.ok){let e=await t.json();$(e.data)}else $({"2025-05-20":11})}catch(e){console.error("获取物品趋势数据失败:",e),$({"2025-05-20":11})}finally{ee(!1)}},ex=()=>{Y(null),$(null)},ef=()=>{es(null)},eh=async e=>{ei(!0);try{let t=await fetch("/api/data-save?type=".concat(e));if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let s=await t.json();for(let[e,t]of Object.entries(s))if("string"==typeof t){let e=document.createElement("a");e.href=t,e.download="",document.body.appendChild(e),e.click(),document.body.removeChild(e),await new Promise(e=>setTimeout(e,500))}er(!1)}catch(e){console.error("下载失败:",e),alert("下载失败，请稍后再试")}finally{ei(!1)}};(0,r.useEffect)(()=>{(async()=>{try{b(!0);let e=await fetch("/api/LogList");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=(await e.json()).list||[],a=Array.isArray(s)?s.map(e=>({value:e,label:e})):[];t(a),a.length>0&&l(a[0].value),P(null)}catch(e){console.error("Error fetching date list:",e),P("获取日期列表失败，请稍后再试")}finally{b(!1)}})()},[]),(0,r.useEffect)(()=>{(async()=>{if(s)try{b(!0);let e=await fetch("/api/analyse?date=".concat(s));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();n(t),P(null)}catch(e){console.error("Error fetching data:",e),P("获取数据失败，请稍后再试")}finally{b(!1)}})()},[s]);let ep=e=>e.includes("冒险家")||e.includes("游医")||e.includes("幸运儿")||e.includes("险家")||e.includes("医的")||e.includes("运儿")||e.includes("家")||e.includes("的")&&(e.includes("方巾")||e.includes("枭羽")||e.includes("怀钟")||e.includes("药壶")||e.includes("银莲")||e.includes("怀表")||e.includes("尾羽")||e.includes("头带")||e.includes("金杯")||e.includes("之花")||e.includes("之杯")||e.includes("沙漏")||e.includes("绿花")||e.includes("银冠")||e.includes("鹰羽"))?"圣遗物":["铁块","白铁块","水晶块","魔晶块","星银矿石","紫晶块","萃凝晶"].includes(e)?"矿物":["苹果","蘑菇","甜甜花","胡萝卜","白萝卜","金鱼草","薄荷","松果","树莓","松茸","鸟蛋","海草","堇瓜","墩墩桃","须弥蔷薇","枣椰","茉洁草","沉玉仙茗","颗粒果","澄晶实","红果果菇","小灯草","嘟嘟莲","莲蓬","绝云椒椒","清心","马尾","琉璃袋","竹笋","绯樱绣球","树王圣体菇","帕蒂沙兰","青蜜莓"].includes(e)?"食材":"其他",ey=e=>Object.entries(e).filter(e=>{let[t]=e;return t.toLowerCase().includes(A.toLowerCase())}).sort((e,t)=>t[1]-e[1]),eg=e=>eo[ep(e)];if(j)return(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsxs)(D.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-xl flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-t-transparent border-primary rounded-full animate-spin mb-4"}),(0,a.jsx)("div",{children:"加载中..."})]})});if(C)return(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsxs)("div",{className:"text-xl text-red-500",children:["错误: ",C]})});if(!i)return(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"无数据"})});let ej=(e=>{let t={圣遗物:{},矿物:{},食材:{},其他:{}};return Object.entries(e).forEach(e=>{let[s,a]=e;t[ep(s)][s]=a}),t})(i.item_count),eb=Object.values(i.item_count).reduce((e,t)=>e+t,0);Object.keys(i.item_count).length;let ev=i.duration,eN=Object.entries(i.item_count).sort((e,t)=>t[1]-e[1]).slice(0,15),ew=(e=>{let t=e.reduce((e,t)=>e+t.count,0),s=e.filter(e=>e.count>0);if(1===s.length){let e=s[0];return[{isFullCircle:!0,color:e.color,name:e.name,count:e.count,percentage:"100.0",path:""}]}let a=0;return e.map(e=>{let s=e.count/t,r=a,l=a+2*s*Math.PI,i=100+80*Math.cos(r),n=100+80*Math.sin(r),o=100+80*Math.cos(l),c=100+80*Math.sin(l),d="M 100 100 L ".concat(i," ").concat(n," A 80 80 0 ").concat(+(s>.5)," 1 ").concat(o," ").concat(c," Z");return a=l,{path:d,color:e.color,name:e.name,count:e.count,percentage:(100*s).toFixed(1)}})})((e=>{let t=[];return Object.entries(e).forEach(e=>{let[s,a]=e,r=Object.values(a).reduce((e,t)=>e+t,0);t.push({name:s,count:r,color:eo[s]})}),t})(ej)),ek=e=>{V(e)},eC=eN[0][1];return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 bg-white relative",children:[(0,a.jsx)(D.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"fixed top-6 right-6 z-50",children:(0,a.jsx)(D.P.a,{href:"https://github.com/Because66666/CanLiang",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 rounded-full shadow-lg transition-all duration-300 hover:shadow-xl",style:{backgroundColor:en.light,border:"2px solid ".concat(en.lightBorder)},whileHover:{scale:1.1,backgroundColor:en.primary,borderColor:en.primary},whileTap:{scale:.95},children:(0,a.jsx)(D.P.div,{whileHover:{color:"#ffffff"},transition:{duration:.2},children:(0,a.jsx)(m.A,{className:"h-6 w-6",style:{color:en.secondary}})})})}),(0,a.jsx)(D.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},className:"fixed top-20 right-6 z-50",children:(0,a.jsxs)(_,{open:ea,onOpenChange:er,children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(D.P.button,{className:"flex items-center justify-center w-12 h-12 rounded-full shadow-lg transition-all duration-300 hover:shadow-xl",style:{backgroundColor:en.light,border:"2px solid ".concat(en.lightBorder)},whileHover:{scale:1.1,backgroundColor:en.primary,borderColor:en.primary},whileTap:{scale:.95},children:(0,a.jsx)(D.P.div,{whileHover:{color:"#ffffff"},transition:{duration:.2},children:(0,a.jsx)(u.A,{className:"h-6 w-6",style:{color:en.secondary}})})})}),(0,a.jsxs)(F,{className:"sm:max-w-md",children:[(0,a.jsx)(W,{children:(0,a.jsx)(G,{children:"选择数据导出格式"})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3 py-4",children:["csv","excel","json","html","xml","pickle"].map(e=>(0,a.jsx)(Z,{variant:"outline",onClick:()=>eh(e),disabled:el,className:"h-12 text-sm transition-all duration-200 hover:scale-105",style:{borderColor:en.lightBorder,color:en.secondary},children:el?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-t-transparent rounded-full animate-spin"}):e.toUpperCase()},e))})]})]})}),J&&(0,a.jsx)(D.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ex,children:(0,a.jsxs)(D.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold",style:{color:en.secondary},children:[J," - 数量趋势"]}),(0,a.jsx)("button",{onClick:ex,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,a.jsx)(x.A,{className:"h-6 w-6",style:{color:en.secondary}})})]}),K?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:en.primary,borderTopColor:"transparent"}})}):X?(0,a.jsx)(Q,{data:X,title:J,colors:en,type:"item"}):(0,a.jsx)("div",{className:"text-center text-gray-500 h-64 flex items-center justify-center",children:"暂无趋势数据"})]})}),et&&(0,a.jsx)(D.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ef,children:(0,a.jsxs)(D.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",style:{color:en.secondary},children:et.title}),(0,a.jsx)("button",{onClick:ef,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,a.jsx)(x.A,{className:"h-6 w-6",style:{color:en.secondary}})})]}),et.loading?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:en.primary,borderTopColor:"transparent"}})}):et.data?(0,a.jsx)(Q,{data:et.data,title:et.title,colors:en,type:et.type}):(0,a.jsx)("div",{className:"text-center text-gray-500 h-64 flex items-center justify-center",children:"暂无趋势数据"})]})}),(0,a.jsx)("div",{className:"mb-8 text-3xl font-bold text-center",style:{color:en.secondary},children:"参量质变仪"}),(0,a.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,a.jsx)(D.P.div,{children:(0,a.jsx)(D.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},children:(0,a.jsx)(o,{className:"border-0 shadow-sm overflow-hidden cursor-pointer hover:shadow-md transition-shadow duration-200",style:{backgroundColor:en.light},onClick:()=>ed("totalItems"),children:(0,a.jsxs)(c,{className:"flex items-center justify-between p-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm",style:{color:en.secondary},children:"总物品数量"}),(0,a.jsx)("p",{className:"text-3xl font-bold",style:{color:en.darkText},children:eb})]}),(0,a.jsx)(f.A,{className:"h-8 w-8",style:{color:en.primary}})]})})})}),(0,a.jsx)(D.P.div,{children:(0,a.jsx)(D.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},children:(0,a.jsx)(o,{className:"border-0 shadow-sm overflow-hidden cursor-pointer hover:shadow-md transition-shadow duration-200",style:{backgroundColor:en.light},onClick:()=>ed("duration"),children:(0,a.jsxs)(c,{className:"flex items-center justify-between p-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm",style:{color:en.secondary},children:"运行时间"}),(0,a.jsx)("p",{className:"text-3xl font-bold",style:{color:en.darkText},children:ev})]}),(0,a.jsx)(h.A,{className:"h-8 w-8",style:{color:en.primary}})]})})})}),(0,a.jsx)(D.P.div,{children:(0,a.jsx)(o,{className:"border-0 shadow-sm overflow-hidden",style:{backgroundColor:en.light},children:(0,a.jsxs)(c,{className:"flex items-center justify-between p-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm",style:{color:en.secondary},children:"最多物品"}),(0,a.jsx)("p",{className:"text-3xl font-bold",style:{color:en.darkText},children:Object.entries(i.item_count).sort((e,t)=>t[1]-e[1])[0][0]})]}),(0,a.jsx)(p.A,{className:"h-8 w-8",style:{color:en.primary}})]})})})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,a.jsxs)("div",{className:"w-full lg:w-1/3 space-y-8",children:[(0,a.jsx)(D.P.div,{children:(0,a.jsx)(o,{className:"border-0 shadow-sm overflow-hidden",children:(0,a.jsxs)(c,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",style:{color:en.secondary},children:"物品类别分布"}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(D.P.div,{className:"relative w-[200px] h-[200px]",initial:{rotate:-90},animate:{rotate:0},transition:{duration:.8,type:"spring"},children:(0,a.jsx)("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:ew.map((e,t)=>"isFullCircle"in e&&e.isFullCircle?(0,a.jsx)(D.P.circle,{cx:"100",cy:"100",r:"80",fill:e.color,onMouseEnter:()=>ek(t),onMouseLeave:()=>ek(null),whileHover:{scale:1.15},transition:{type:"spring",stiffness:300}},t):(0,a.jsx)(D.P.path,{d:e.path,fill:e.color,stroke:"white",strokeWidth:"1",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1*t,duration:.5},onMouseEnter:()=>ek(t),onMouseLeave:()=>ek(null),whileHover:{scale:1.15,transformOrigin:"center",transition:{type:"spring",stiffness:300}}},t))})}),(0,a.jsx)("div",{className:"mt-6 grid grid-cols-2 gap-x-4 gap-y-3 w-full",children:ew.map((e,t)=>(0,a.jsxs)(D.P.div,{className:"flex items-center",style:{backgroundColor:I===t?"#f0f4ff":"transparent",borderRadius:6,padding:"4px 8px"},onMouseEnter:()=>ek(t),onMouseLeave:()=>ek(null),transition:{duration:.2},children:[(0,a.jsx)("div",{className:"w-4 h-4 mr-2 flex-shrink-0 rounded-sm",style:{backgroundColor:e.color}}),(0,a.jsxs)("div",{className:"flex justify-between w-full",children:[(0,a.jsx)(D.P.span,{className:"text-sm font-medium",animate:{fontWeight:I===t?700:500,scale:I===t?1.05:1,color:I===t?en.primary:en.secondary},transition:{duration:.2},children:e.name}),(0,a.jsxs)(D.P.span,{className:"text-sm",animate:{scale:I===t?1.1:1,color:I===t?en.primary:en.secondary},transition:{duration:.2},children:[e.percentage,"%"]})]})]},t))})]})]})})},"pie-chart-".concat(H)),(0,a.jsx)(D.P.div,{children:(0,a.jsx)(o,{className:"border-0 shadow-sm overflow-hidden",children:(0,a.jsxs)(c,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",style:{color:en.secondary},children:"物品数量排行（前十五）"}),(0,a.jsx)("div",{className:"space-y-4",children:eN.slice(0,15).map((e,t)=>{let[s,r]=e;return(0,a.jsxs)(D.P.div,{className:"flex flex-col",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*t,duration:.3},children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"font-medium truncate",children:s}),(0,a.jsx)("span",{style:{color:en.secondary},children:r})]}),(0,a.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-3",children:(0,a.jsx)(D.P.div,{initial:{width:0},animate:{width:"".concat(r/eC*100,"%")},transition:{duration:.8,delay:.2+.1*t},className:"h-3 rounded-full",style:{backgroundColor:ec[t%ec.length]}})})]},t)})})]})})},"bar-chart-".concat(H))]}),(0,a.jsxs)("div",{className:"w-full lg:w-2/3",children:[(0,a.jsx)(D.P.div,{className:"mb-8 p-6 rounded-lg",style:{backgroundColor:en.light},children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center gap-6 md:gap-8",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"h-4 w-4",style:{color:en.primary}}),(0,a.jsx)("span",{className:"text-sm",style:{color:en.secondary},children:"搜索物品:"})]}),(0,a.jsx)("div",{className:"relative w-full max-w-md",children:(0,a.jsx)(d,{placeholder:"搜索物品...",className:"pl-4 py-3 border-0 shadow-sm focus:ring-2 w-[240px]",style:{borderColor:en.lightBorder,boxShadow:"0 0 0 1px ".concat(en.lightBorder)},value:A,onChange:e=>T(e.target.value)})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4",style:{color:en.primary}}),(0,a.jsx)("span",{className:"text-sm",style:{color:en.secondary},children:"选择日期:"})]}),(0,a.jsxs)(O,{value:s,onValueChange:e=>{e!==s&&(M(!0),setTimeout(()=>{l(e),U(e=>e+1),b(!0),setTimeout(()=>{b(!1),M(!1)},600)},300))},children:[(0,a.jsx)(L,{className:"w-[240px] border-0 shadow-sm focus:ring-2",style:{borderColor:en.lightBorder,boxShadow:"0 0 0 1px ".concat(en.lightBorder)},children:(0,a.jsx)(R,{placeholder:"选择日期"})}),(0,a.jsx)(E,{children:e.map(e=>(0,a.jsx)(z,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsx)("button",{onClick:()=>{l("all")},className:"px-4 py-2 rounded-md text-sm font-medium shadow-sm",style:{backgroundColor:"all"===s?en.primary:"#fff",color:"all"===s?"#fff":en.secondary,boxShadow:"0 0 0 1px ".concat(en.lightBorder)},children:"全部"})]})}),(0,a.jsxs)(v,{defaultValue:"all",className:"flex flex-col items-center",children:[(0,a.jsx)(D.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,a.jsxs)(N,{className:"mb-6 p-1 rounded-md",style:{backgroundColor:en.lightGray},children:[(0,a.jsx)(w,{value:"all",className:"data-[state=active]:text-white",style:{backgroundColor:"transparent",color:en.secondary,"--tw-data-state-active-bg":en.primary},children:"全部"}),Object.keys(ej).map(e=>(0,a.jsx)(w,{value:e,className:"data-[state=active]:text-white",style:{backgroundColor:"transparent",color:en.secondary,"--tw-data-state-active-bg":en.primary},children:e},e))]})}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(k,{value:"all",children:(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:ey(i.item_count).map((e,t)=>{let[s,r]=e;return(0,a.jsx)(D.P.div,{children:(0,a.jsx)(q,{name:s,count:r,color:eg(s),onClick:()=>eu(s)})},s)})},"all-items-".concat(H))}),Object.entries(ej).map(e=>{let[t,s]=e;return(0,a.jsx)(k,{value:t,children:(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:ey(s).map((e,s)=>{let[r,l]=e;return(0,a.jsx)(D.P.div,{children:(0,a.jsx)(q,{name:r,count:l,color:eo[t],onClick:()=>eu(r)})},r)})},"".concat(t,"-items-").concat(H))},t)})]})]})]})]})]})}function q(e){let{name:t,count:s,color:r,onClick:l}=e;return(0,a.jsx)(D.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},children:(0,a.jsx)(o,{className:"border border-gray-100 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:l,children:(0,a.jsx)(c,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"truncate font-medium",children:t}),(0,a.jsx)("div",{className:"ml-2 rounded-full px-2 py-1 text-xs font-semibold text-white",style:{backgroundColor:r},children:s})]})})})})}function Q(e){let{data:t,title:s,colors:r,type:l}=e,i=Object.entries(t).sort((e,t)=>{let[s]=e,[a]=t;return s.localeCompare(a)}),n=Math.max(...Object.values(t)),o=Math.min(...Object.values(t)),c=e=>{if("duration"===l){let t=Math.floor(e/60),s=e%60;return t>0?"".concat(t,"h ").concat(s,"m"):"".concat(s,"m")}return e.toString()},d=i.map((e,t)=>{let[s,a]=e;return{x:60+t/(i.length-1)*480,y:60+(n-a)/(n-o||1)*180,date:s,value:a}}),m=d.reduce((e,t,s)=>"".concat(e," ").concat(0===s?"M":"L"," ").concat(t.x," ").concat(t.y),""),u="".concat(m," L ").concat(d[d.length-1].x," ").concat(240," L ").concat(60," ").concat(240," Z");return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-2",children:[(()=>{switch(l){case"totalItems":return(0,a.jsx)(f.A,{className:"h-5 w-5",style:{color:r.primary}});case"duration":return(0,a.jsx)(h.A,{className:"h-5 w-5",style:{color:r.primary}});default:return(0,a.jsx)(j.A,{className:"h-5 w-5",style:{color:r.primary}})}})(),(0,a.jsx)("span",{className:"font-medium",style:{color:r.secondary},children:"totalItems"===l?"总物品数量变化趋势":"duration"===l?"运行时间变化趋势":"数量变化趋势"})]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("svg",{width:"100%",height:"300",viewBox:"0 0 ".concat(600," ").concat(300),className:"overflow-visible",children:[(0,a.jsxs)("defs",{children:[(0,a.jsx)("pattern",{id:"grid",width:"40",height:"30",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 40 0 L 0 0 0 30",fill:"none",stroke:"#e5e5e5",strokeWidth:"1"})}),(0,a.jsxs)("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:r.primary,stopOpacity:"0.3"}),(0,a.jsx)("stop",{offset:"100%",stopColor:r.primary,stopOpacity:"0.05"})]})]}),(0,a.jsx)("rect",{x:60,y:60,width:480,height:180,fill:"url(#grid)"}),[0,.25,.5,.75,1].map(e=>{let t=Math.round(o+(n-o)*(1-e)),s=60+180*e;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:55,y1:s,x2:60,y2:s,stroke:"#666",strokeWidth:"1"}),(0,a.jsx)("text",{x:50,y:s+4,textAnchor:"end",fontSize:"12",fill:"#666",children:"duration"===l?t>60?"".concat(Math.floor(t/60),"h"):"".concat(t,"m"):t})]},e)}),(0,a.jsx)("path",{d:u,fill:"url(#areaGradient)"}),(0,a.jsx)(D.P.path,{d:m,fill:"none",stroke:r.primary,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5,ease:"easeInOut"}}),d.map((e,t)=>(0,a.jsxs)(D.P.g,{children:[(0,a.jsx)(D.P.circle,{cx:e.x,cy:e.y,r:"4",fill:"white",stroke:r.primary,strokeWidth:"3",initial:{scale:0},animate:{scale:1},transition:{delay:.1*t+.5,duration:.3},whileHover:{scale:1.5}}),(0,a.jsxs)("text",{x:e.x,y:260,textAnchor:"middle",fontSize:"11",fill:"#666",transform:"rotate(-45, ".concat(e.x,", ").concat(260,")"),children:[e.date.slice(4)," "]}),(0,a.jsxs)(D.P.g,{opacity:0,whileHover:{opacity:1},transition:{duration:.2},children:[(0,a.jsx)("rect",{x:e.x-35,y:e.y-35,width:"70",height:"25",fill:"rgba(0,0,0,0.8)",rx:"4"}),(0,a.jsx)("text",{x:e.x,y:e.y-18,textAnchor:"middle",fontSize:"12",fill:"white",children:c(e.value)})]})]},t)),(0,a.jsx)("line",{x1:60,y1:60,x2:60,y2:240,stroke:"#333",strokeWidth:"2"}),(0,a.jsx)("line",{x1:60,y1:240,x2:540,y2:240,stroke:"#333",strokeWidth:"2"})]})}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:r.light},children:[(0,a.jsx)("div",{className:"text-sm",style:{color:r.secondary},children:"最大值"}),(0,a.jsx)("div",{className:"text-xl font-bold",style:{color:r.darkText},children:c(n)})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:r.light},children:[(0,a.jsx)("div",{className:"text-sm",style:{color:r.secondary},children:"最小值"}),(0,a.jsx)("div",{className:"text-xl font-bold",style:{color:r.darkText},children:c(o)})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:r.light},children:[(0,a.jsx)("div",{className:"text-sm",style:{color:r.secondary},children:"平均值"}),(0,a.jsx)("div",{className:"text-xl font-bold",style:{color:r.darkText},children:c(Math.round(Object.values(t).reduce((e,t)=>e+t,0)/Object.values(t).length))})]})]})]})}},5572:(e,t,s)=>{Promise.resolve().then(s.bind(s,3632))}},e=>{var t=t=>e(e.s=t);e.O(0,[324,441,684,358],()=>t(5572)),_N_E=e.O()}]);